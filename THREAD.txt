
Shared State:
  drawA_halfway:            Fence
  drawA_finished:           Fence
  drawB_halfway:            Fence
  drawB_finished:           Fence

Threads:
   Control
   Transfer
   Record

Data:
   DataA -- all the data (uniform buffers, etc) that must be written from
            the CPU to the GPU which phase-A consumes.
   DataB -- all the data (uniform buffers, etc) that must be written from
            the CPU to the GPU which phase-B consumes.

---------------------------------------------------------------------------------------------------
control thread:
---------------

(DataA, EarlyDataB) = UpdateData();
Upload (DataA)

submit 1st half to QueueA, fence=drawA_halfway
wait on drawA_halfway

loop {
  DataB = EarlyDataB;
  (DataA, EarlyDataB) = UpdateData();
  Upload (DataA, DataB)

  submit 2st half to QueueA, fence=drawA_finished
  submit 1st half to QueueB, fence=drawB_halfway
  wait on drawA_finished
  Present swapchain A
  wait on drawB_halfway

  DataB = EarlyDataB;
  (DataA, EarlyDataB) = UpdateData();
  Upload(DataA, DataB)

  submit 2nd half to QueueB, fence=drawB_finished
  submit 1st half to QueueA, fence=drawA_halfway
  wait on drawB_finished
  Present swapchain B
  wait on drawA_halfway
}
